<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}BangkokToDay{% endblock %}</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- ‡∏ñ‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ <i class="bi ..."> ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}" />
    {% block head %}{% endblock %}
  </head>

  <body
    data-role-label="{{ session.get('user', {}).get('role_name', '-') }}"
    data-user-name="{{ session.get('user', {}).get('fname', '-') }}"
    data-avatar-url="{{ session.get('user', {}).get('avatar_url') or url_for('static', filename='img/default-avatar.png') }}"
  >
    <!-- NAVBAR -->
    <nav class="navbar app-navbar sticky-top">
      <div class="container-fluid px-3">
        <button
          class="btn btn-outline-danger d-lg-none me-2"
          id="btnToggleSidebar"
          type="button"
        >
          ‚ò∞
        </button>

        <a class="navbar-brand brand" href="#" onclick="return false;">
          <span class="brand-badge"></span>
          ‡∏ö‡∏≤‡∏á‡∏Å‡∏≠‡∏Å‡∏ó‡∏π‡πÄ‡∏î‡∏¢‡πå
        </a>

        <div class="ms-auto d-flex align-items-center gap-2">
          <!-- ‚úÖ role ‡∏à‡∏≤‡∏Å session -->
          <span class="role-pill" id="rolePill">
            {{ session.get('user', {}).get('role_name', '-') }}
          </span>

          <div class="dropdown user-menu">
            <button
              class="dropdown-toggle btn btn-light"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
              aria-label="User menu"
            >
              <!-- ‚úÖ avatar ‡∏à‡∏≤‡∏Å session -->
              <img
                class="avatar"
                id="navAvatar"
                alt="avatar"
                src="{{ session.get('user', {}).get('avatar_url') or url_for('static', filename='img/default-avatar.png') }}"
              />
              <!-- ‚úÖ fname ‡∏à‡∏≤‡∏Å session -->
              <strong class="small" id="navUserName">
                {{ session.get('user', {}).get('fname', '-') }}
              </strong>
              <span class="ms-1 text-muted" aria-hidden="true">‚ñæ</span>
            </button>

            <ul class="dropdown-menu dropdown-menu-end p-2">
              <li>
                <a class="dropdown-item rounded-3" href="#" id="ddProfile">
                  ‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
                </a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item rounded-3 text-danger" href="#" id="ddLogout">
                  üö™ Logout
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <!-- ‚úÖ APP SHELL -->
    <div class="app-shell">
      <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

      <!-- SIDEBAR -->
      <aside class="sidebar" id="sidebar">
        <div class="profile-card">
          <div class="d-flex align-items-center gap-3">
            <!-- ‚úÖ avatar -->
            <img
              class="avatar"
              id="sideAvatar"
              alt="avatar"
              src="{{ session.get('user', {}).get('avatar_url') or url_for('static', filename='img/default-avatar.png') }}"
            />
            <div>
              <!-- ‚úÖ fname -->
              <div class="profile-name" id="sideUserName">
                {{ session.get('user', {}).get('fname', '-') }}
              </div>
              <!-- ‚úÖ role -->
              <div class="profile-meta" id="sideUserRole">
                ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: {{ session.get('user', {}).get('role_name', '-') }}
              </div>
            </div>
          </div>
        </div>

        <div class="mt-3">
          <div class="nav-section-title">‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</div>
          <a class="side-link" href="#/dashboard">üìä Dashboard</a>
        </div>

        <div class="mt-3">
          <div class="nav-section-title">‡πÄ‡∏°‡∏ô‡∏π‡∏á‡∏≤‡∏ô</div>
          <a class="side-link" href="#/news/create">‚úçÔ∏è ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πà‡∏≤‡∏ß</a>
          <a class="side-link" href="#/news">üì∞ ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏ß‡∏°‡∏Ç‡πà‡∏≤‡∏ß</a>
          <a class="side-link" href="#/staff/add">üë§‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</a>
          <a class="side-link" href="#/ads/review">üì£ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤</a>
        </div>
      </aside>

      <!-- MAIN -->
      <main id="main" class="main">
        {% block content %}{% endblock %}
      </main>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- ‚úÖ ‡πÉ‡∏´‡πâ bootstrap ‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô layout.js ‡πÄ‡∏û‡∏∑‡πà‡∏≠ dropdown ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ä‡∏±‡∏ß‡∏£‡πå -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/layout.js') }}"></script>

    {% block scripts %}{% endblock %}
  </body>
</html>
