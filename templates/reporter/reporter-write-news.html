{% extends "layout/reporter-layout.html" %}

{% block title %}Reporter Dashboard{% endblock %}

{% block head %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
{% endblock %}

{% block content %}
<div class="main-content">
  <h2 class="mb-4">เขียนข่าว</h2>

  <div class="card">
    <div class="card-header">เขียนบทความข่าวใหม่</div>

    <div class="card-body">
      <form id="writeNewsForm" autocomplete="off">
        <div class="mb-3">
          <label for="newsTitle" class="form-label">หัวข้อ/ชื่อเรื่อง</label>
          <input type="text" class="form-control" id="newsTitle" name="title" placeholder="กรอกหัวข้อข่าว" required />
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="mainCategory" class="form-label">เลือกประเภทข่าวหลัก</label>
            <select class="form-select" id="mainCategory" name="cat_id" required>
              <option value="" selected disabled>เลือกประเภทข่าวหลัก</option>
              {% for c in categories %}
                <option value="{{ c.cat_id }}">{{ c.cat_name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="col-md-6">
            <label for="subCategory" class="form-label">เลือกประเภทย่อย</label>
            <select class="form-select" id="subCategory" name="subcat_id" required disabled>
              <option value="" selected disabled>เลือกประเภทย่อย</option>
            </select>
            <div class="form-text" id="subcatHint">กรุณาเลือกประเภทข่าวหลักก่อน</div>
          </div>
        </div>

        <div class="mb-3">
          <label for="newsSummary" class="form-label">สรุปข่าว (บทนำ)</label>
          <textarea class="form-control" id="newsSummary" name="summary" rows="3"
            placeholder="กรอกสรุปข่าวสั้นๆ 2-3 ประโยค" required></textarea>
        </div>

        <div class="mb-3">
          <label for="newsContent" class="form-label">เนื้อหาข่าว</label>

          <div class="btn-toolbar mb-2" role="toolbar" aria-label="toolbar">
            <div class="btn-group me-2" role="group">
              <button type="button" class="btn btn-sm btn-outline-secondary" title="Bold">
                <i class="bi bi-type-bold"></i>
              </button>
              <button type="button" class="btn btn-sm btn-outline-secondary" title="Italic">
                <i class="bi bi-type-italic"></i>
              </button>
              <button type="button" class="btn btn-sm btn-outline-secondary" title="Underline">
                <i class="bi bi-type-underline"></i>
              </button>
            </div>
            <div class="btn-group me-2" role="group">
              <button type="button" class="btn btn-sm btn-outline-secondary" title="Unordered list">
                <i class="bi bi-list-ul"></i>
              </button>
              <button type="button" class="btn btn-sm btn-outline-secondary" title="Ordered list">
                <i class="bi bi-list-ol"></i>
              </button>
            </div>
            <div class="btn-group" role="group">
              <button type="button" class="btn btn-sm btn-outline-secondary" title="Link">
                <i class="bi bi-link-45deg"></i>
              </button>
              <button type="button" class="btn btn-sm btn-outline-secondary" title="Image">
                <i class="bi bi-image"></i>
              </button>
            </div>
          </div>

          <textarea class="form-control" id="newsContent" name="content" rows="15" placeholder="กรอกเนื้อหาข่าว" required></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">รูปภาพ</label>
          <div class="row">
            <div class="col-md-6">
              <label for="mainImage" class="form-label">รูปหลัก</label>
              <input type="file" class="form-control" id="mainImage" name="main_image" accept="image/*" />
              <div class="mt-2">
                <img src="https://picsum.photos/seed/news-main/600/400.jpg" class="news-image-preview" alt="รูปหลัก" id="mainImagePreview" />
              </div>
            </div>

            <div class="col-md-6">
              <label for="subImages" class="form-label">รูปรอง (สามารถเลือกได้หลายรูป)</label>
              <input type="file" class="form-control" id="subImages" name="sub_images" multiple accept="image/*" />
              <div class="mt-2" id="subImagesPreview">
                <img src="https://picsum.photos/seed/news-sub1/300/200.jpg" class="news-image-preview me-2 mb-2" alt="รูปรอง 1" />
                <img src="https://picsum.photos/seed/news-sub2/300/200.jpg" class="news-image-preview me-2 mb-2" alt="รูปรอง 2" />
              </div>
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">ประเภทข่าว</label>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="newsType" id="featuredNews" value="featured" />
            <label class="form-check-label" for="featuredNews">ข่าวยอดฮิต</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="newsType" id="regularNews" value="regular" checked />
            <label class="form-check-label" for="regularNews">ข่าวทั่วไป</label>
          </div>
        </div>

        <div class="mb-3">
          <label for="tags" class="form-label">แท็ก</label>
          <input type="text" class="form-control" id="tags" name="tags" placeholder="กรอกแท็ก คั่นด้วยเครื่องหมายจุลภาค (,)" />
          <small class="form-text text-muted">ตัวอย่าง: การเมือง, รัฐบาล, เศรษฐกิจ</small>
        </div>

        <div class="mb-3">
          <label for="publishDate" class="form-label">วันที่เผยแพร่</label>
          <input type="datetime-local" class="form-control" id="publishDate" name="publish_date" />
        </div>

        <div class="d-flex justify-content-between">
          <div>
            <button type="button" class="btn btn-secondary me-2">บันทึกฉบับร่าง</button>
            <button type="button" class="btn btn-outline-primary">ดูตัวอย่าง</button>
          </div>
          <div>
            <button type="button" class="btn btn-danger me-2">ยกเลิก</button>
            <button type="button" class="btn btn-primary">เผยแพร่ข่าว</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/common.js') }}"></script>
<script src="{{ url_for('static', filename='js/reporter-write-news.js') }}"></script>
{% endblock %}
